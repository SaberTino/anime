<!doctype html>
<html lang="zh-cn">
 <head>
  <title>登录页面</title>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="../css/login.css">
	
 </head>
 <body>	
		<div id="content">	
			<h1 class="title">登录账户</h1>
			<p class="avatar"> 
				<img  src="../images/login.png" alt="">
			</p>
				<p class="word">
					登录名称:<input type="text" id="uname">
				</p>
				<p class="word">
					登录密码:<input type="password" id="upwd">
				</p>
				<p>
					<button onclick="check_login()">登录</button>
				</p>
				<p class="register">
					<a href="register.html">注册账户</a>
				</p>
			</div>	
		<script src="../js/common.js"></script>
		<script>
			function check_login(){
				//1.获取xhr
				var xhr =getXhr();
				//2.创建请求
				xhr.open("post","../data/php/login.php",true);
				//修改请求消息头
				xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
				//3.设置回调函数
				xhr.onreadystatechange = function(){
					if(xhr.readyState==4 && xhr.status==200){
						if(xhr.responseText == 1){
							//1加双引号一直登入失败???
							alert("登录成功");
							//可以执行 登入成功
							window.location="../index.html";
						}else{
							alert('登入失败');
							//可以执行 登入失败
						}
					}
				}
				//4.发送请求
				var uname=$("uname").value;
				var upwd=$("upwd").value;
				var param="uname="+uname+"&upwd="+upwd;
				xhr.send(param);
			}
		</script>
 </body>
</html>
